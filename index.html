<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰ª•ÂãïÁâ©ÁÇ∫Â∏´ÔºöÊ≥åÂ∞øÁßëÁöÑÂ•áÂ¶ôË∂£ËÅû</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;900&display=swap" rel="stylesheet">
    <!-- Tone.js CDN for sound effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #334155;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Ensure body takes full viewport height */
            margin: 0;
            padding: 0.2rem; /* Further reduced overall padding */
            box-sizing: border-box;
            overflow-x: hidden;
        }
        .header-image {
            max-width: 120px; /* Slightly smaller image to save space */
            height: auto;
            margin-bottom: -0.5rem; /* Negative margin to pull it closer to the title */
            border-radius: 0.75rem; /* Rounded corners for the image */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .page-title {
            font-weight: 900; /* Extra bold */
            text-align: center;
            margin-bottom: 0.2rem; /* Reduced space below title */
            line-height: 1.2;
            color: #1e3a8a;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* Subtle shadow for liveliness */
        }
        .page-title .line1 {
            font-size: 2.5rem; /* Slightly smaller font for title lines */
        }
        .page-title .line2 {
            font-size: 2rem; /* Slightly smaller font for title lines */
        }
        @media (max-width: 768px) {
            .header-image {
                max-width: 80px; /* Smaller on mobile */
            }
            .page-title .line1 {
                font-size: 1.8rem;
            }
            .page-title .line2 {
                font-size: 1.5rem;
            }
        }

        .instructions {
            color: #334155;
            font-size: 1.1rem;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.85); /* Slightly less transparent */
            padding: 0.6rem 1.2rem; /* Reduced padding */
            border-radius: 0.75rem;
            margin-top: 0.3rem; /* Reduced space above instructions */
            margin-bottom: 0.6rem; /* Reduced space below instructions */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .image-container {
            position: relative;
            width: 90vw;
            max-width: 900px;
            padding-bottom: 90%;
            background-image: url('https://i.postimg.cc/HLrKphpj/1752077963456.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 1.5rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .hotspot {
            position: absolute;
            cursor: pointer;
            border-radius: 50%;
            transition: background-color 0.3s ease, transform 0.1s ease-out; /* Add transform for subtle click effect */
            background-color: rgba(0, 0, 0, 0); /* Fully transparent by default */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .hotspot:hover {
            background-color: rgba(255, 255, 255, 0.3); /* Subtle highlight on hover */
            transform: scale(1.02); /* Slightly enlarge on hover */
        }
        .hotspot:active {
            transform: scale(0.98); /* Shrink on click */
        }
        .hotspot.found {
            background-color: rgba(100, 180, 255, 0.4); /* Light blue for found items */
            border: 2px solid #3b82f6; /* Blue border */
        }

        /* Specific hotspot positioning (adjusted for the new image) */
        #whale-hotspot { top: 10%; left: 25%; width: 50%; height: 25%; }
        #bat-hotspot { top: 12%; left: 78%; width: 15%; height: 10%; }
        #camel-hotspot { top: 30%; left: 5%; width: 20%; height: 35%; }
        #elephant-hotspot { top: 38%; left: 38%; width: 20%; height: 28%; }
        #chameleon-hotspot { top: 30%; left: 72%; width: 15%; height: 20%; }
        #penguin1-hotspot { top: 65%; left: 15%; width: 10%; height: 15%; } /* Left penguin */
        #penguin2-hotspot { top: 52%; left: 65%; width: 10%; height: 15%; } /* Right penguin */
        #kangaroo-hotspot { top: 48%; left: 78%; width: 15%; height: 25%; }
        #hippo-hotspot { top: 60%; left: 45%; width: 20%; height: 25%; }
        #beaver-hotspot { top: 75%; left: 75%; width: 15%; height: 15%; }
        #bird-hotspot { top: 15%; left: 15%; width: 10%; height: 10%; } /* General birds on left */
        #mammal-hotspot { top: 60%; left: 28%; width: 10%; height: 10%; } /* Near the cat on the desk */

        /* Modal Styling */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #ffffff;
            border-radius: 1rem;
            padding: 2rem;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal-overlay.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        .close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #64748b;
        }
        .close-button:hover {
            color: #1e3a8a;
        }

        /* Stopwatch specific styles */
        .stopwatch-container {
            text-align: center;
            margin-top: 1.5rem;
            border-top: 1px solid #e2e8f0;
            padding-top: 1.5rem;
        }
        .stopwatch-display {
            font-size: 3rem;
            font-weight: bold;
            color: #2563eb;
            margin-bottom: 1rem;
        }
        .stopwatch-buttons button {
            background-color: #3b82f6;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            margin: 0 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s ease;
            border: none;
        }
        .stopwatch-buttons button:hover {
            background-color: #2563eb;
        }
        .stopwatch-buttons button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }

        /* Container for counter and reset button */
        .bottom-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 0.6rem; /* Adjusted margin-top to pull it up */
        }

        .found-counter-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #1e3a8a;
            background-color: rgba(255, 255, 255, 0.85);
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-right: 1rem; /* Space between counter and button */
        }

        .reset-button {
            background-color: #3b82f6; /* Blue color for reset */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s ease;
            border: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .reset-button:hover {
            background-color: #2563eb; /* Darker blue on hover */
        }
    </style>
</head>
<body>
    <img src="https://i.postimg.cc/y8Vb1Jkb/1752081440038.png" alt="ÂãïÁâ©Ê≥åÂ∞øÁßëÂúñÁ§∫" class="header-image">

    <div class="page-title">
        <div class="line1">‰ª•ÂãïÁâ©ÁÇ∫Â∏´</div>
        <div class="line2">Ê≥åÂ∞øÁßëÁöÑÂ•áÂ¶ôË∂£ËÅû</div>
    </div>

    <div class="instructions">
        ÈªûÊìäÂúñÁâá‰∏≠ÁöÑÂãïÁâ©ÔºåÊé¢Á¥¢Áâ†ÂÄëÁöÑÊ≥åÂ∞øÁßëË∂£ËÅûÔºÅ‰Ω†ËÉΩÊâæÂá∫ÂπæÁ®ÆÂãïÁâ©Âë¢Ôºü
    </div>

    <div class="image-container">
        <!-- Hotspots for each animal (no text displayed) -->
        <div id="whale-hotspot" class="hotspot" onclick="showFact('whale')"></div>
        <div id="bat-hotspot" class="hotspot" onclick="showFact('bat')"></div>
        <div id="camel-hotspot" class="hotspot" onclick="showFact('camel')"></div>
        <div id="elephant-hotspot" class="hotspot" onclick="showFact('elephant')"></div>
        <div id="chameleon-hotspot" class="hotspot" onclick="showFact('chameleon')"></div>
        <div id="penguin1-hotspot" class="hotspot" onclick="showFact('penguin')"></div> <!-- Left penguin -->
        <div id="penguin2-hotspot" class="hotspot" onclick="showFact('penguin')"></div> <!-- Right penguin -->
        <div id="kangaroo-hotspot" class="hotspot" onclick="showFact('kangaroo')"></div>
        <div id="hippo-hotspot" class="hotspot" onclick="showFact('hippo')"></div>
        <div id="beaver-hotspot" class="hotspot" onclick="showFact('beaver')"></div>
        <div id="bird-hotspot" class="hotspot" onclick="showFact('bird')"></div>
        <div id="mammal-hotspot" class="hotspot" onclick="showFact('mammal')"></div>
    </div>

    <div class="bottom-controls">
        <div id="foundCounter" class="found-counter-display">
            0 / 11
        </div>
        <button class="reset-button" onclick="resetGame()">ÈáçÁΩÆÈÅäÊà≤</button>
    </div>

    <!-- Modal for displaying facts -->
    <div id="factModal" class="modal-overlay" onclick="hideFact()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="close-button" onclick="hideFact()">‚úï</button>
            <h3 id="modalTitle" class="text-2xl font-bold mb-4 text-blue-700"></h3>
            <p id="modalContent" class="text-base text-gray-700 leading-relaxed"></p>
            <!-- Stopwatch container, hidden by default -->
            <div id="stopwatchContainer" class="stopwatch-container hidden">
                <div id="stopwatchDisplay" class="stopwatch-display">00:00</div>
                <div class="stopwatch-buttons">
                    <button id="startButton" onclick="startStopwatch()">ÈñãÂßã</button>
                    <button id="stopButton" onclick="stopStopwatch()" disabled>ÂÅúÊ≠¢</button>
                    <button id="resetButton" onclick="resetStopwatch()" disabled>ÈáçÁΩÆ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tone.js Synth for the ticking sound
        let tickSynth = null;
        let tickLoop = null;

        // Stopwatch variables
        let timer;
        let seconds = 0;
        let isRunning = false;

        // Set to store unique animal keys that have been found
        const foundAnimals = new Set();
        const totalAnimals = 11; // Total number of unique animals

        // Function to format time
        function formatTime(sec) {
            const minutes = Math.floor(sec / 60);
            const remainingSeconds = sec % 60;
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        // Function to update stopwatch display
        function updateStopwatch() {
            seconds++;
            document.getElementById('stopwatchDisplay').textContent = formatTime(seconds);
        }

        // Initialize Tone.js synth for ticking sound
        function initTickSound() {
            if (!tickSynth) {
                // Tone.start() must be called to enable audio
                Tone.start();
                tickSynth = new Tone.MembraneSynth({
                    pitchDecay: 0.008,
                    octaves: 1,
                    envelope: {
                        attack: 0.001,
                        decay: 0.1,
                        sustain: 0,
                        release: 0.01,
                        attackCurve: "exponential"
                    },
                    oscillator: {
                        type: "sine"
                    }
                }).toDestination();
            }
        }

        // Start stopwatch
        function startStopwatch() {
            if (!isRunning) {
                initTickSound(); // Ensure synth is initialized and audio context started
                isRunning = true;
                timer = setInterval(updateStopwatch, 1000);

                // Start Tone.js loop for ticking sound
                if (tickLoop) Tone.Transport.stop(); // Stop previous loop if any
                tickLoop = new Tone.Loop(time => {
                    tickSynth.triggerAttackRelease("C2", "8n", time); // Play a low C note for a short duration
                }, "1n").start(0); // "1n" means every whole note, effectively every second
                Tone.Transport.start(); // Start the transport to make the loop run

                document.getElementById('startButton').disabled = true;
                document.getElementById('stopButton').disabled = false;
                document.getElementById('resetButton').disabled = false;
            }
        }

        // Stop stopwatch
        function stopStopwatch() {
            if (isRunning) {
                isRunning = false;
                clearInterval(timer);
                if (tickLoop) {
                    tickLoop.stop();
                    Tone.Transport.stop(); // Stop the transport
                }
                document.getElementById('startButton').disabled = false;
                document.getElementById('stopButton').disabled = true;
            }
        }

        // Reset stopwatch
        function resetStopwatch() {
            stopStopwatch();
            seconds = 0;
            document.getElementById('stopwatchDisplay').textContent = formatTime(seconds);
            document.getElementById('startButton').disabled = false;
            document.getElementById('stopButton').disabled = true;
            document.getElementById('resetButton').disabled = true;
            if (tickLoop) {
                tickLoop.dispose(); // Dispose loop on full reset
                tickLoop = null;
            }
        }

        // Function to update the found counter display
        function updateFoundCounter() {
            document.getElementById('foundCounter').textContent = `${foundAnimals.size} / ${totalAnimals}`;
        }

        // Function to reset the entire game
        function resetGame() {
            foundAnimals.clear(); // Clear the set of found animals
            // Remove 'found' class from all hotspots
            const hotspots = document.querySelectorAll('.hotspot');
            hotspots.forEach(hotspot => {
                hotspot.classList.remove('found');
            });
            updateFoundCounter(); // Reset the counter display
            hideFact(); // Close modal and reset stopwatch if open
        }

        // Define facts for each animal/category
        const facts = {
            whale: {
                title: 'üêã ÈØ®È≠öËàáÊµ∑Ë±öÁöÑÊ≥åÂ∞øÂ•áËπü',
                content: 'Êµ∑Ë±öÊìÅÊúâÊ•µÂÖ∂È´òÊïàÁöÑËÖéËáüÁ≥ªÁµ±ÔºåËÉΩÂ§†ÂæûÊµ∑Ê∞¥‰∏≠ÊèêÂèñÊ∑°Ê∞¥‰∏¶ÊéíÂá∫È´òÊøÉÂ∫¶ÁöÑÈπΩÂàÜ„ÄÇÁâ†ÂÄëÁöÑËÖéËáüÊøÉÁ∏ÆËÉΩÂäõÊØî‰∫∫È°ûÂº∑Â•ΩÂπæÂÄçÔºåÈÄôÂ∞çÁ†îÁ©∂ËÖéËáüÁñæÁóÖÂíåÊ∞¥ÈõªËß£Ë≥™Âπ≥Ë°°ÂæàÊúâÂïüÁôºÊÄß„ÄÇÈØ®È≠öÂèØ‰ª•Èï∑ÊôÇÈñìÊÜãÂ∞øÔºåÊúâ‰∫õÁ®ÆÈ°ûËÉΩÊÜãÊï∏Â∞èÊôÇ„ÄÇÁâ†ÂÄëÁöÑËÜÄËÉ±ÁµêÊßãÂíåÁ•ûÁ∂ìÊéßÂà∂Á≥ªÁµ±ÁÇ∫Ê≤ªÁôÇ‰∫∫È°ûÂ∞øÂ§±Á¶ÅÊèê‰æõ‰∫ÜÁ†îÁ©∂ÊñπÂêë„ÄÇ',
                hasStopwatch: false
            },
            bat: {
                title: 'ü¶á ËùôËù†ÁöÑÂÄíÊéõÊéíÂ∞ø',
                content: 'ËùôËù†ËÉΩÂ§†Âú®ÂÄíÊéõÁãÄÊÖã‰∏ãÊ≠£Â∏∏ÊéíÂ∞øÔºåÈÄôÊ∂âÂèäÁâπÊÆäÁöÑËÇåËÇâÊéßÂà∂ÂíåÈáçÂäõÈÅ©ÊáâÊ©üÂà∂ÔºåÂ∞çÂæÆÈáçÂäõÁí∞Â¢É‰∏ãÁöÑÊ≥åÂ∞øÁ≥ªÁµ±Á†îÁ©∂ÂæàÊúâÂÉπÂÄº„ÄÇÂÑòÁÆ°ÂÄíÊéõÔºåËùôËù†ÁöÑÊ≥åÂ∞øÁ≥ªÁµ±‰ªçËÉΩÊúâÊïàÈÅã‰ΩúÔºåÈÄôÂ∞çÂæÆÈáçÂäõÁí∞Â¢É‰∏ãÁöÑÊ≥åÊ≥åÂ∞øÁ≥ªÁµ±Á†îÁ©∂Ôºà‰æãÂ¶ÇÂ§™Á©∫‰∫∫ÔºâÂæàÊúâÂÉπÂÄºÔºåÊé¢Ë®éÈáçÂäõÂ∞çÁîüÁêÜÁöÑÂΩ±Èüø„ÄÇ',
                hasStopwatch: false
            },
            camel: {
                title: 'üê™ Èß±ÈßùÔºöÊ≤ôÊº†‰∏≠ÁöÑÁúÅÊ∞¥Â∞àÂÆ∂',
                content: 'Èß±ÈßùÁöÑËÖéËáüÊìÅÊúâË∂ÖÈï∑ÁöÑËÖéÂ∞èÁÆ°ÔºåËÉΩÊúÄÂ§ßÈôêÂ∫¶Âú∞ÈáçÂê∏Êî∂Ê∞¥ÂàÜÔºåÊéíÂá∫Ê•µÂÖ∂ÊøÉÁ∏ÆÁöÑÂ∞øÊ∂≤ÔºåÊúâÊôÇÁîöËá≥ÂëàËÜèÁãÄ„ÄÇÈÄôÁ®Æ„ÄåÊª¥Ê∞¥‰∏çÊºè„ÄçÁöÑÁîüÂ≠òÊ©üÂà∂ÔºåÂ∞çÊñºÁ†îÁ©∂ËÖéËáüÊøÉÁ∏ÆÂäüËÉΩÂíåÊ≤ªÁôÇ‰∫∫È°ûËÑ´Ê∞¥ÁóáÁãÄÊèê‰æõ‰∫ÜÁç®ÁâπÁöÑË¶ñËßí„ÄÇÈß±ÈßùËÉΩÊâøÂèóÈ´îÈáç25%ÁöÑÊ∞¥ÂàÜÊµÅÂ§±ËÄå‰∏çÂΩ±ÈüøÁîüÂëΩÔºåÁâ†ÂÄëÁöÑÂ∞øÊ∂≤ÊØîÊµ∑Ê∞¥ÈππÂÖ©ÂÄç„ÄÇ',
                hasStopwatch: false
            },
            elephant: {
                title: 'üêò Â§ßË±°ÁöÑ„ÄåÂ∞èÂûãÁÄëÂ∏É„Äç',
                content: 'Âú®‰∫ûÁâπËò≠Â§ßÂãïÁâ©ÂúíÔºåÈùûÊ¥≤Ë±°ÊúÉÂú®ÊØèÂ§©Âõ∫ÂÆöÊôÇÈñìÊéíÂ∞øÔºåÂ∞øÊ∂≤Ê∞¥Êü±È´ò‰∏îÂº∑ÂãÅÔºåÂÉèÂ∞èÂûãÁÄëÂ∏É‰∏ÄÊ®£ÔºåÊ∞¥Ëä±ÈñÉËÄÄÈôΩÂÖâÔºåËÆì‰∫∫ÊÑüÂèóÂà∞Ëá™ÁÑ∂ÁïåÊ≥åÂ∞øÁ≥ªÁµ±ÁöÑÂ£ØËßÄËàáË¶èÂæã„ÄÇÂ§ßË±°ÈæêÂ§ßÁöÑÈ´îÂûãÊÑèÂë≥ËëóÂÖ∂ËÜÄËÉ±ÂÆπÈáèÂ∑®Â§ßÔºåÊéíÂ∞øÊôÇÈúÄË¶ÅÂº∑Â§ßÁöÑËÜÄËÉ±Â£ìÂäõÊâçËÉΩÂ∞áÂ§ßÈáèÂ∞øÊ∂≤ËøÖÈÄüÊéíÂá∫„ÄÇ',
                hasStopwatch: false
            },
            chameleon: {
                title: 'ü¶é ËÆäËâ≤ÈæçÁöÑ„ÄåÁöÆËÜöËÖéËáü„Äç',
                content: 'Êúâ‰∫õËÆäËâ≤ÈæçÈô§‰∫ÜËÖéËáüÔºåÈÇÑÂú®È†≠ÈÉ®ÊàñÁúºÁùõÈôÑËøëÊìÅÊúâÁâπÊÆäÁöÑ„ÄåÊéíÈπΩËÖ∫„Äç„ÄÇÁï∂È´îÂÖßÈπΩÂàÜÈÅéÈ´òÊôÇÔºåÈÄô‰∫õËÖ∫È´îÊúÉÂàÜÊ≥åÂá∫È´òÊøÉÂ∫¶ÁöÑÈπΩÊ∞¥ÔºåÂ¶ÇÂêåÊµÅÊ±ó‰∏ÄËà¨ÊéíÂá∫Â§öÈ§òÁöÑÈπΩÂàÜ„ÄÇÈÄôÂ±ïÁ§∫‰∫ÜÁîüÁâ©È´îÂú®Èù¢Â∞çÁâπÊÆäÁí∞Â¢ÉÂ£ìÂäõÊôÇÔºåÊ≥åÂ∞øÊéíÊ≥ÑÊñπÂºèÁöÑÂ§öÂÖÉÂåñËàáÈùàÊ¥ªÊÄß„ÄÇ',
                hasStopwatch: false
            },
            penguin: { /* This is the key for the fact content */
                title: 'üêß ‰ºÅÈµùÁöÑ„ÄåÈºªÂ≠îÊéíÈπΩ„Äç',
                content: '‰ºÅÈµùÊúâÁâπÊÆäÁöÑÈπΩËÖ∫‰æÜËôïÁêÜÈÅéÈáèÁöÑÈπΩÂàÜÔºåÈÄôÂÄãÁ≥ªÁµ±ÊØîËÖéËáüÊõ¥ÊúâÊïàÁéá„ÄÇÁâ†ÂÄëÊúÉÂæûÈºªÂ≠îÊéíÂá∫È´òÊøÉÂ∫¶ÁöÑÈπΩÊ∞¥ÔºåÈÄôÁ®ÆÊ©üÂà∂ÂïüÁôº‰∫Ü‰∫∫Â∑•ËÖéËáüË®≠Ë®àÁöÑÁ†îÁ©∂„ÄÇÈπΩËÖ∫‰ΩçÊñº‰ºÅÈµùÁúºÁùõ‰∏äÊñπÔºåËÉΩÂ∞áË°ÄÊ∂≤‰∏≠ÁöÑÈπΩÂàÜÈÅéÊøæ‰∏¶ÊøÉÁ∏ÆÊéíÂá∫ÔºåËÆì‰ºÅÈµùÂèØ‰ª•È£≤Áî®Êµ∑Ê∞¥„ÄÇ',
                hasStopwatch: false
            },
            kangaroo: {
                title: 'ü¶ò Ë¢ãÈº†ÁöÑ„ÄåÊ∞¥ÂàÜÂõûÊî∂Âª†„Äç',
                content: 'Ë¢ãÈº†Âú®‰πæÊó±Áí∞Â¢É‰∏≠ËÉΩÊ•µÂ∫¶ÊøÉÁ∏ÆÂ∞øÊ∂≤‰ª•‰øùÂ≠òÊ∞¥ÂàÜÔºåÁâ†ÂÄëÁöÑËÖéËáüÊøÉÁ∏ÆËÉΩÂäõÂïüÁôº‰∫ÜËÖéËáüÈÄèÊûêÊäÄË°ìÁöÑÊîπÈÄ≤„ÄÇË¢ãÈº†ÁöÑËÖéËáüËÉΩÁî¢ÁîüÊØîË°ÄÊ∂≤Êª≤ÈÄèÂ£ìÈ´òÊï∏ÂÄçÁöÑÂ∞øÊ∂≤ÔºåÈÄôËÆìÁâ†ÂÄëÂú®Áº∫Ê∞¥ÊôÇËÉΩÊúÄÂ§ßÈôêÂ∫¶Âú∞ÂõûÊî∂È´îÂÖßÊ∞¥ÂàÜ„ÄÇ',
                hasStopwatch: false
            },
            hippo: {
                title: 'ü¶õ Ê≤≥È¶¨ÁöÑ„ÄåÂ§©ÁÑ∂Èò≤Êõ¨‰π≥„Äç',
                content: 'Ê≤≥È¶¨ÊúÉÂàÜÊ≥å‰∏ÄÁ®ÆÁ¥ÖËâ≤ÁöÑÊ∂≤È´îÔºåËµ∑ÂàùË¢´Ë™§Ë™çÁÇ∫ÊòØË°ÄÊ±óÔºåÂæå‰æÜÁôºÁèæÈÄôÊòØÂê´ÊúâÂ§©ÁÑ∂Èò≤Êõ¨ÊàêÂàÜÁöÑÂàÜÊ≥åÁâ©„ÄÇÈÄôÁ®ÆÁâ©Ë≥™ËÉΩ‰øùË≠∑Ê≤≥È¶¨ÂÖçÂèóÁ¥´Â§ñÁ∑öÂÇ∑ÂÆ≥ÔºåÁÇ∫ÁöÆËÜö‰øùË≠∑Á†îÁ©∂Êèê‰æõ‰∫ÜÊñ∞ÊÄùË∑Ø„ÄÇÈÄôÁ®ÆÊ∂≤È´îÂê´Êúâ„ÄåÊ≤≥È¶¨ÈÖ∏„ÄçÂíå„ÄåÁ¥ÖÊ≤≥È¶¨ÈÖ∏„ÄçÔºåÂÖ∑ÊúâÊäóËèåÂíåÈò≤Êõ¨ÂäüËÉΩ„ÄÇ',
                hasStopwatch: false
            },
            beaver: {
                title: 'ü¶´ Ê≤≥Áã∏ÔºöÁØâÂ∑¢ËàáÊ®ôË®òÁöÑ„ÄåÂ§öÂäüËÉΩÊéíÊ≥ÑÁâ©„Äç',
                content: 'Ê≤≥Áã∏ÊúÉÂà©Áî®Ëá™Â∑±ÁöÑÂ∞øÊ∂≤ÂíåËÖ∫È´îÂàÜÊ≥åÁâ©Ê∑∑ÂêàËÄåÊàêÁöÑ„ÄåÊµ∑Áã∏È¶ô„ÄçÔºàcastoreumÔºâ‰æÜÊ®ôË®òÈ†òÂú∞„ÄÇÈÄôÁ®ÆÁâ©Ë≥™‰∏çÂÉÖÊ∞£Âë≥ÊøÉÁÉàÔºåÈÅéÂéªÁîöËá≥Ë¢´Áî®ÊñºÈ¶ôÊ∞¥ÂíåÈ£üÂìÅË™øÂë≥Âäë„ÄÇÊ≠§Â§ñÔºåÁâ†ÂÄëÁöÑÊéíÊ≥ÑÁâ©ÊúâÊôÇ‰πüÊúÉË¢´Á¥çÂÖ•Áâ†ÂÄëÁöÑÂª∫ÁØâÊùêÊñô‰∏≠ÔºåÈ´îÁèæ‰∫ÜÂãïÁâ©Â∞çË≥áÊ∫êÁöÑÂÖÖÂàÜÂà©Áî®„ÄÇ',
                hasStopwatch: false
            },
            bird: {
                title: 'üêçüê¶ Áà¨Ë°åÂãïÁâ©ËàáÈ≥•È°ûÁöÑ„ÄåÂõ∫È´îÂ∞ø„Äç',
                content: 'Ë®±Â§öÁà¨Ë°åÂãïÁâ©ÔºàÂ¶ÇËõá„ÄÅËú•Ëú¥ÔºâÂíåÈ≥•È°ûÔºàÂ∞§ÂÖ∂ÊòØÊ≤ôÊº†È≥•È°ûÔºâ‰∏çÂÉèÊàëÂÄë‰∏ÄÊ®£ÊéíÂá∫Ê∂≤ÊÖãÂ∞øÊ∂≤„ÄÇÁâ†ÂÄëÁöÑË∫´È´îËÉΩÂ∞áÂ§öÈ§òÁöÑÊ∞ÆÂª¢Áâ©ËΩâÂåñÁÇ∫‰∏çÊ∫∂ÊñºÊ∞¥ÁöÑÂ∞øÈÖ∏Ôºå‰∏¶‰ª•ÁôΩËâ≤Âõ∫È´îÊàñÂçäÂõ∫È´îÁöÑ„ÄåÁµêÊô∂Â∞ø„ÄçÂΩ¢ÂºèÊéíÂá∫„ÄÇÈÄôÁ®ÆÊñπÂºèÂπæ‰πé‰∏çÈúÄË¶ÅÈ°çÂ§ñÊ∞¥ÂàÜÔºåÊòØÊ•µÁ´ØÁº∫Ê∞¥Áí∞Â¢É‰∏ãÁöÑÊúÄ‰Ω≥ÈÅ©Êáâ„ÄÇÈÄô‰πüÂïüÁôº‰∫ÜÁßëÂ≠∏ÂÆ∂Â∞çÊ≥åÂ∞øÈÅìÁµêÁü≥ÊàêÂõ†ÂíåÈ†êÈò≤ÁöÑÁ†îÁ©∂„ÄÇ',
                hasStopwatch: false
            },
            mammal: {
                title: '‚è±Ô∏è Âì∫‰π≥ÂãïÁâ©ÁöÑ„Äå21ÁßíÂÆöÂæã„Äç',
                content: 'ÁæéÂúã‰ΩêÊ≤ª‰∫ûÁêÜÂ∑•Â≠∏Èô¢ÁöÑËÉ°Á´ãÂæ∑ÊïôÊéàÂúòÈöä‰ΩøÁî®È´òÈÄüÊîùÂΩ±Ê©üÊãçÊîùÂ§öÁ®ÆÂì∫‰π≥ÂãïÁâ©ÔºàÂ¶ÇËÄÅÈº†„ÄÅÂ±±Áæä„ÄÅÁâõ„ÄÅÂ§ßË±°„ÄÅÁãóÁ≠âÔºâÁöÑÊéíÂ∞øÈÅéÁ®ãÔºåÁôºÁèæÂè™Ë¶ÅÈ´îÈáçË∂ÖÈÅé3ÂÖ¨Êñ§ÔºåÂì∫‰π≥ÂãïÁâ©ÁöÑÂ∞øÂ∞øÊôÇÈñìÈÉΩÁ¥ÑÁÇ∫21ÁßíÂ∑¶Âè≥„ÄÇÈÄôÈ†ÖÁ†îÁ©∂Áç≤Âæó‰∫ÜÊêûÁ¨ëË´æË≤ùÁàæÁâ©ÁêÜÂ≠∏ÁçéÔºåÈ°ØÁ§∫‰∏çÂêåÈ´îÂûãÁöÑÂì∫‰π≥ÂãïÁâ©ÊéíÂ∞øÊôÇÈñìÁ´üÁÑ∂ÈùûÂ∏∏Êé•ËøëÔºåÈÄôÊòØÊµÅÈ´îÂãïÂäõÂ≠∏ÁöÑÂ∑ßÂ¶ôÁµêÊûú„ÄÇÊÇ®ÂèØ‰ª•ÈªûÊìä‰∏ãÊñπÁöÑÊåâÈàïÔºåÂòóË©¶Ë®àÊôÇ21ÁßíÔºÅ',
                hasStopwatch: true
            }
        };

        // Mapping for hotspots that share the same fact but need individual highlighting
        const sharedFactHotspots = {
            'penguin': ['penguin1-hotspot', 'penguin2-hotspot']
        };

        function showFact(animalKey) {
            const modal = document.getElementById('factModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            const stopwatchContainer = document.getElementById('stopwatchContainer');

            const fact = facts[animalKey];
            if (fact) {
                modalTitle.textContent = fact.title;
                modalContent.textContent = fact.content;

                // Handle shared fact hotspots
                if (sharedFactHotspots[animalKey]) {
                    sharedFactHotspots[animalKey].forEach(hotspotId => {
                        const hotspotElement = document.getElementById(hotspotId);
                        if (!foundAnimals.has(hotspotId)) { // Use hotspotId as unique key for foundAnimals
                            foundAnimals.add(hotspotId);
                            hotspotElement.classList.add('found');
                        }
                    });
                } else {
                    // For single-hotspot animals
                    const hotspotElement = document.getElementById(animalKey + '-hotspot');
                    if (!foundAnimals.has(animalKey)) {
                        foundAnimals.add(animalKey);
                        hotspotElement.classList.add('found');
                    }
                }
                updateFoundCounter();


                if (fact.hasStopwatch) {
                    stopwatchContainer.classList.remove('hidden');
                    resetStopwatch(); // Reset stopwatch when showing this fact
                } else {
                    stopwatchContainer.classList.add('hidden');
                    stopStopwatch(); // Ensure stopwatch is stopped if not needed
                }

                modal.classList.add('show');
            }
        }

        function hideFact() {
            const modal = document.getElementById('factModal');
            modal.classList.remove('show');
            // Stop and reset stopwatch when modal is hidden
            stopStopwatch();
            seconds = 0;
            document.getElementById('stopwatchDisplay').textContent = formatTime(seconds);
            document.getElementById('startButton').disabled = false;
            document.getElementById('stopButton').disabled = true;
            document.getElementById('resetButton').disabled = true;
            document.getElementById('stopwatchContainer').classList.add('hidden'); // Hide container
        }

        // Optional: Close modal if escape key is pressed
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                hideFact();
            }
        });

        // Initialize counter display on page load
        document.addEventListener('DOMContentLoaded', updateFoundCounter);
    </script>
</body>
</html>

